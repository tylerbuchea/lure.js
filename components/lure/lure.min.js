

var lure = new function() {

    //var internalFunction = function() {};
    //this.publicFunction = function() {};

	/* ---------------------------------------------------------------------------
	 * Private API
	 * --------------------------------------------------------------------------- */

    var routes = [];
    var controllers = {};
    var currentRoute = '';

    //connect controller and view
    var compileView = function(route) {

        scope = controllers[route.controller]();
        console.log(route);
        console.log(scope);

        $.get(route.template, function(html) {
            console.log(html);
        });

    };
    //regex find {{*}} and lu-*
    //
    //view { parse expressions ie: In two years you'll be {{2 + $scope.usersAge}} 
    //Run all lu-event="function" events through .on('-event', "function")  }
    //lu-repeat 


	/* ---------------------------------------------------------------------------
	 * Public API
	 * --------------------------------------------------------------------------- */

    /** Initialize a Route **/
    this.initRoute = function() {

        var thisRoute = window.location.pathname;

        if (thisRoute != currentRoute) {

            for (i in routes) {

                if(routes[i].uri == thisRoute) {
                    compileView(routes[i]);
                    history.pushState( currentRoute = routes[i].uri );
                    break;
                }

            }

        }

    };

	/** Route **/
    this.route = function(config) {

		routes.push(config);

    };

    /** Controller **/
    this.controller = function(name, callback) {
        
        controllers[name] = callback;

    };

    /** Lure Events **/


    /** Finishing Touch **/
    window.onpopstate = function (event) {
        lure.initRoute();   
    };

};